# Generated by Anaconda 34.25.2.10
# Generated by pykickstart v3.32
#version=RHEL9
# Use graphical install
graphical
repo --name="AppStream" --baseurl=file:///run/install/sources/mount-0000-cdrom/AppStream

%addon com_redhat_kdump --enable --reserve-mb='auto'

%end

%addon com_redhat_oscap
    content-type = scap-security-guide
    datastream-id = scap_org.open-scap_datastream_from_xccdf_ssg-rhel9-xccdf.xml
    xccdf-id = scap_org.open-scap_cref_ssg-rhel9-xccdf.xml
    profile = xccdf_org.ssgproject.content_profile_anssi_bp28_enhanced
%end

# Keyboard layouts
keyboard --xlayouts='fr'
# System language
lang en_US.UTF-8

# Use CDROM installation media
cdrom

%packages
@^minimal-environment
@guest-agents
@standard
aide
chrony
dnf-automatic
openscap
openscap-scanner
rsyslog
rsyslog-gnutls
scap-security-guide
sudo
-dhcp-server
-rsh
-rsh-server
-sendmail
-talk
-talk-server
-telnet
-telnet-server
-tftp
-tftp-server
-xinetd
-ypbind
-ypserv

%end

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.6.0
ignoredisk --only-use=sda
# Partition clearing information
clearpart --none --initlabel
# Disk partitioning information
part /boot --fstype="xfs" --ondisk=sda --size=1024
part pv.1163 --fstype="lvmpv" --ondisk=sda --size=26680
part /boot/efi --fstype="efi" --ondisk=sda --size=600 --fsoptions="umask=0077,shortname=winnt"
volgroup rhel --pesize=4096 pv.1163
logvol / --fstype="xfs" --size=10240 --name=root --vgname=rhel
logvol /var/log --fstype="xfs" --size=2048 --name=var_log --vgname=rhel
logvol swap --fstype="swap" --size=2097 --name=swap --vgname=rhel
logvol /tmp --fstype="xfs" --size=1024 --name=tmp --vgname=rhel
logvol /opt --fstype="xfs" --size=2048 --name=opt --vgname=rhel
logvol /srv --fstype="xfs" --size=1024 --name=srv --vgname=rhel
logvol /var --fstype="xfs" --size=2048 --name=var --vgname=rhel
logvol /home --fstype="xfs" --size=3072 --name=home --vgname=rhel
logvol /var/log/audit --fstype="xfs" --size=2044 --name=var_log_audit --vgname=rhel
logvol /var/tmp --fstype="xfs" --size=1024 --name=var_tmp --vgname=rhel

# System timezone
timezone Europe/Paris --utc

# Root password
rootpw --iscrypted --allow-ssh $6$VNq1DUjvaAlcN4/b$dikBgC2MwVKqYq.wSpYVFbJtOGPEFUDkFJjEOtoGZzFMsy0CtxA3AXtPtitapnfo1rUc1TcKNwIxzKZTvyode0
user --groups=wheel --name=admin --password=$6$UXwTGqu2iribCWT1$wjMpXU4un.IKMLzd/anmOK3tsT8wBygqNSeJWg6sbfTXvEocBegWNHNfJEJbH3DEqE46tPXnpmzM3kFFo1vW./ --iscrypted --gecos="admin"

